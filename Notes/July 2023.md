ToDo List:

Merge results from 1000 SNP and ALL SNP - multilevel

finish manuscript AIGS disease

interpretation - attention blocks



***copy a backup code for each runs



```bash
composer="D:/PhD_Notebook/Code/ML_composer/"
pheno="H:/ML_archive/Data/sugarcane_disease/sugarcane_disease.phen"
index="H:/ML_archive/Data/sugarcane_disease/sugarcane_disease.index"
epoch=50
loss="mse"
act="leaky_relu"
header="\tTrait\tTrainSet\tValidSet\tModel\tTest_Accuracy\tValid_Accuracy\t${loss}\tRuntime"
mkdir -p H:/ML_archive/PIP_attention/CNN/
for AB in 1
do
echo $AB
for idx in {1..5}
do
for trait in smut pachy
do

if [ $trait == "smut" ]; 
	then tdx=1;
elif [ $trait == "pachy" ];
	then tdx=2;
fi

geno="H:/ML_archive/Data/sugarcane_disease/sugarcane_disease_1000_v${idx}_${trait}"
target="H:/ML_archive/PIP_attention/CNN/v${idx}_1000SNP/"
python $composer/GS_composer.py --ped $geno --pheno $pheno --mpheno $tdx --index $index --trait $trait --width 256 --depth 4 --model "Numeric CNN" -o $target --quiet 1 --plot --epoch $epoch --round 1 --locallyConnect 16 --embedding 16 --AttentionBlock $AB --activation $act --batch 256 --num-heads 1 --locallyBlock 1 --vindex $idx --lr 0.001 --loss $loss

trait="pachy"
target="H:/ML_archive/PIP_attention/CNN/v${idx}_1000SNP/"
echo $trait
python $composer/GS_composer.py --ped $geno --pheno $pheno --mpheno 2 --index $index --trait $trait --width 256 --depth 4 --model "Numeric CNN" -o $target --quiet 1 --plot --epoch $epoch --round 1 --locallyConnect 16 --embedding 16 --AttentionBlock $AB --activation $act --batch 256 --num-heads 1 --locallyBlock 1 --vindex $idx --lr 0.001 --loss $loss

done
done

geno="H:/ML_archive/Data/sugarcane_disease/sugarcane_disease"
pheno="H:/ML_archive/Data/sugarcane_disease/sugarcane_disease.phen"
index="H:/ML_archive/Data/sugarcane_disease/sugarcane_disease.index"
target="H:/ML_archive/"
act="leaky_relu"
epoch=30
batch=128

python $composer/GS_composer.py --ped $geno --pheno $pheno --mpheno 1 --index $index --trait smut --width 256 --depth 4 --model "Numeric CNN" -o $target --quiet 1 --plot --epoch $epoch --round 1 --locallyConnect 16 --embedding 16 --AttentionBlock $AB --activation $act --batch $batch --num-heads 1 --locallyBlock 1 --lr 0.001 --loss $loss

python $composer/GS_composer.py --ped $geno --pheno $pheno --mpheno 2 --index $index --trait pachy --width 256 --depth 4 --model "Numeric CNN" -o $target --quiet 1 --plot --epoch $epoch --round 1 --locallyConnect 16 --embedding 16 --AttentionBlock $AB --activation $act --batch $batch --num-heads 1 --locallyBlock 1 --lr 0.001 --loss $loss
```



########multiLevel Attention

```bash

composer="D:/PhD_Notebook/Code/ML_composer/"
pheno="H:/ML_archive/Data/sugarcane_disease/sugarcane_disease.phen"
index="H:/ML_archive/Data/sugarcane_disease/sugarcane_disease.index"
epoch=30
loss="mse"
act="leaky_relu"
for AB in 1
do
echo $AB
for idx in {1..5}
do
for epi in Epi
do

if [ $epi == "Epi" ]; 
	then e="--epistatic";
elif [ $epi == "noEpi" ];
	then e="";
fi

for trait in smut
do

if [ $trait == "smut" ]; 
	then tdx=1;
elif [ $trait == "pachy" ];
	then tdx=2;
fi

geno="H:/ML_archive/Data/sugarcane_disease/sugarcane_disease_1000_v${idx}_${trait}"
target="H:/ML_archive/PIP_attention/MultiLevel/v${idx}_${AB}AB_${epi}_1000SNP_${act}/"
python $composer/GS_composer.py --ped $geno --pheno $pheno --mpheno $tdx --index $index --trait $trait --width 256 --depth 1 --model "MultiLevel Attention" -o $target --quiet 1 --plot --epoch $epoch --round 1 --locallyConnect 16 --embedding 16 --AttentionBlock $AB --activation $act --batch 64 --num-heads 1 --locallyBlock 1 $e --vindex $idx --lr 0.001 --loss $loss

done
done
done
done

header="\tTrait\tTrainSet\tValidSet\tModel\tTest_Accuracy\tValid_Accuracy\t${loss}\tRuntime"
echo $loss
for epi in Epi noEpi
do 
echo "epi is ${epi}"
for trait in smut pachy
do
path="H:/ML_archive/PIP_attention/MultiLevel/1AB_${epi}_1000SNP/"
mkdir -p $path
mkdir -p $path/${trait}_MultiLevelAttention_${trait}/
echo -e $header > $path/MultiLevelAttention_train_record_$trait.csv
for idx in {1..5}
do
echo $idx
cat H:/ML_archive/PIP_attention/MultiLevel/v${idx}_1AB_${epi}_1000SNP/MultiLevelAttention_train_record_${trait}.csv | grep -v "Trait" >> $path/MultiLevelAttention_train_record_${trait}.csv
cp H:/ML_archive/PIP_attention/MultiLevel/v${idx}_1AB_${epi}_1000SNP/model_summary.txt $path/
cp  H:/ML_archive/PIP_attention/MultiLevel/v${idx}_1AB_${epi}_1000SNP/${trait}_MultiLevelAttention_${trait}/* $path/${trait}_MultiLevelAttention_${trait}/
#echo -e $header
done
done
done
```

